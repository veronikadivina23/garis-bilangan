<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Garis Bilangan Interaktif</title>
  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: linear-gradient(to bottom, #dff6ff, #ffffff);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 30px;
    }

    h1 {
      color: #0077b6;
      margin-bottom: 20px;
    }

    .number-line {
      position: relative;
      width: 800px;
      height: 100px;
      border-top: 4px solid #023e8a;
      margin-top: 60px;
    }

    .tick {
      position: absolute;
      width: 2px;
      height: 15px;
      background-color: #023e8a;
      top: -8px;
    }

    .label {
      position: absolute;
      top: 10px;
      font-size: 14px;
      color: #03045e;
    }

    .ball {
      position: absolute;
      top: -25px;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background-color: #ffd60a;
      box-shadow: 0 0 10px #ffd60a;
      transition: left 0.4s ease;
    }

    .trail {
      position: absolute;
      width: 20px;
      height: 4px;
      background-color: red;
      top: -10px;
      border-radius: 2px;
    }

    .controls {
      margin-top: 20px;
      text-align: center;
    }

    input, select, button {
      font-size: 16px;
      padding: 6px 10px;
      margin: 5px;
      border-radius: 8px;
      border: 2px solid #00b4d8;
    }

    button {
      background-color: #00b4d8;
      color: white;
      cursor: pointer;
      transition: 0.3s;
    }

    button:hover {
      background-color: #0077b6;
    }

    #result {
      font-size: 22px;
      color: #0077b6;
      margin-top: 20px;
      font-weight: bold;
    }

    .arrow {
      position: absolute;
      top: -40px;
      font-size: 18px;
      color: red;
    }
  </style>
</head>
<body>
  <h1>🧮 Garis Bilangan Interaktif</h1>

  <div class="controls">
    <label>Bilangan 1:</label>
    <input type="number" id="num1" value="0" min="-10" max="10" />
    <label>Operasi:</label>
    <select id="operation">
      <option value="+">+</option>
      <option value="-">-</option>
    </select>
    <label>Bilangan 2:</label>
    <input type="number" id="num2" value="0" min="-10" max="10" />
    <button onclick="start()">Hitung</button>
    <button onclick="resetLine()">🔄 Reset</button>
  </div>

  <div class="number-line" id="numberLine"></div>
  <div id="result"></div>

  <audio id="popSound">
    <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_2bfcf8b0db.mp3?filename=pop-94319.mp3" type="audio/mpeg" />
  </audio>

  <script>
    const line = document.getElementById("numberLine");
    const popSound = document.getElementById("popSound");
    const startX = 400; // posisi tengah (nol)
    const gap = 40; // jarak antar angka

    // Buat garis bilangan dari -10 sampai 10
    for (let i = -10; i <= 10; i++) {
      const tick = document.createElement("div");
      tick.className = "tick";
      tick.style.left = `${startX + i * gap}px`;
      line.appendChild(tick);

      const label = document.createElement("div");
      label.className = "label";
      label.style.left = `${startX + i * gap - 5}px`;
      label.textContent = i;
      line.appendChild(label);
    }

    // Buat bola awal
    const ball = document.createElement("div");
    ball.className = "ball";
    line.appendChild(ball);
    ball.style.left = `${startX - 15}px`;

    let currentPos = 0;
    let trails = [];

    function start() {
      const num1 = parseInt(document.getElementById("num1").value);
      const num2 = parseInt(document.getElementById("num2").value);
      const op = document.getElementById("operation").value;

      let result;
      if (op === "+") result = num1 + num2;
      else result = num1 - num2;

      if (result > 10 || result < -10) {
        alert("Hasil di luar jangkauan garis bilangan (-10 sampai 10).");
        return;
      }

      moveBall(num1, op, num2, result);
    }

    async function moveBall(num1, op, num2, result) {
      resetTrails();
      currentPos = num1;
      ball.style.left = `${startX + num1 * gap - 15}px`;

      const steps = Math.abs(num2);
      const direction = op === "+" ? 1 : -1;

      for (let i = 1; i <= steps; i++) {
        await new Promise(r => setTimeout(r, 600));
        currentPos += direction;

        // jejak merah
        const trail = document.createElement("div");
        trail.className = "trail";
        trail.style.left = `${startX + (currentPos - direction / 2) * gap - 10}px`;
        trail.style.backgroundColor = "red";
        line.appendChild(trail);
        trails.push(trail);

        // panah kecil
        const arrow = document.createElement("div");
        arrow.className = "arrow";
        arrow.innerHTML = direction === 1 ? "➡️" : "⬅️";
        arrow.style.left = `${startX + currentPos * gap - 10}px`;
        line.appendChild(arrow);
        setTimeout(() => arrow.remove(), 500);

        popSound.currentTime = 0;
        popSound.play();

        ball.style.left = `${startX + currentPos * gap - 15}px`;
        ball.style.backgroundColor = randomColor();
      }

      document.getElementById("result").textContent = 
        `Hasil: ${num1} ${op} ${num2} = ${result}`;
    }

    function resetTrails() {
      trails.forEach(t => t.remove());
      trails = [];
    }

    function resetLine() {
      resetTrails();
      document.getElementById("num1").value = 0;
      document.getElementById("num2").value = 0;
      document.getElementById("operation").value = "+";
      document.getElementById("result").textContent = "";
      ball.style.left = `${startX - 15}px`;
      ball.style.backgroundColor = "#ffd60a";
    }

    function randomColor() {
      const colors = ["#ffd60a", "#ff6b6b", "#90e0ef", "#06d6a0", "#f4a261"];
      return colors[Math.floor(Math.random() * colors.length)];
    }
  </script>
</body>
</html>
